<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pesso - App Financiera</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        // Dark Mode Colors - Jerarquía de superficies
                        dark: {
                            bg: '#121212',           // Fondo principal
                            surface: '#1E1E1E',      // Tarjetas/contenedores
                            surface2: '#2A2A2A',     // Elevación 1
                            surface3: '#3A3A3A',     // Elevación 2 (hover/activo)
                            border: '#404040',       // Bordes sutiles
                        },
                        // Texto Dark Mode
                        darktext: {
                            primary: '#E0E0E0',      // Principal (87% opacity)
                            secondary: '#B0B0B0',    // Secundario (60%)
                            disabled: '#757575',     // Deshabilitado (38%)
                        },
                        // Colores de marca desaturados para dark mode
                        brand: {
                            primary: '#4A9EFF',      // Azul desaturado
                            success: '#66BB6A',      // Verde desaturado
                            warning: '#FFB74D',      // Naranja desaturado
                            error: '#CF6679',        // Rojo desaturado (Material Design)
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Transiciones suaves entre temas */
        * {
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }
        
        /* Scrollbar personalizado para dark mode */
        .dark ::-webkit-scrollbar {
            width: 8px;
        }
        .dark ::-webkit-scrollbar-track {
            background: #121212;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #3A3A3A;
            border-radius: 4px;
        }
        .dark ::-webkit-scrollbar-thumb:hover {
            background: #4A4A4A;
        }

        /* Toggle switch mejorado */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #4A9EFF;
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #4A9EFF;
        }
        
        /* Efectos de elevación en dark mode */
        .dark .elevation-1 {
            background-color: #1E1E1E;
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        .dark .elevation-2 {
            background-color: #2A2A2A;
            box-shadow: 0 2px 6px rgba(0,0,0,0.4);
        }
        
        /* Estados de focus visibles */
        .dark *:focus-visible {
            outline: 2px solid #4A9EFF;
            outline-offset: 2px;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 dark:bg-dark-bg dark:text-darktext-primary transition-colors duration-300">

    <!-- App Container -->
    <div id="app" class="min-h-screen flex flex-col max-w-md mx-auto bg-white dark:bg-dark-bg shadow-2xl overflow-hidden relative">
        
        <!-- Header -->
        <header class="bg-white dark:bg-dark-surface border-b dark:border-dark-border p-4 flex justify-between items-center sticky top-0 z-50">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-blue-600 dark:bg-brand-primary rounded-lg flex items-center justify-center text-white font-bold">P</div>
                <span class="font-bold text-xl dark:text-darktext-primary">Pesso</span>
            </div>
            <button onclick="toggleTheme()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-dark-surface2 transition-colors" aria-label="Cambiar tema">
                <!-- Icono Sol (Light) -->
                <svg id="sun-icon" class="w-6 h-6 hidden dark:block text-brand-warning" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                <!-- Icono Luna (Dark) -->
                <svg id="moon-icon" class="w-6 h-6 block dark:hidden text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                </svg>
            </button>
        </header>

        <!-- Navegación Principal -->
        <nav class="flex border-b dark:border-dark-border bg-white dark:bg-dark-surface overflow-x-auto">
            <button onclick="showSection('home')" class="nav-btn flex-1 py-3 px-4 text-sm font-medium text-blue-600 dark:text-brand-primary border-b-2 border-blue-600 dark:border-brand-primary whitespace-nowrap" data-section="home">
                Inicio
            </button>
            <button onclick="showSection('transfer')" class="nav-btn flex-1 py-3 px-4 text-sm font-medium text-gray-500 dark:text-darktext-secondary hover:text-gray-700 dark:hover:text-darktext-primary whitespace-nowrap" data-section="transfer">
                Transferir
            </button>
            <button onclick="showSection('accounts')" class="nav-btn flex-1 py-3 px-4 text-sm font-medium text-gray-500 dark:text-darktext-secondary hover:text-gray-700 dark:hover:text-darktext-primary whitespace-nowrap" data-section="accounts">
                Cuentas
            </button>
            <button onclick="showSection('appearance')" class="nav-btn flex-1 py-3 px-4 text-sm font-medium text-gray-500 dark:text-darktext-secondary hover:text-gray-700 dark:hover:text-darktext-primary whitespace-nowrap" data-section="appearance">
                Apariencia
            </button>
        </nav>

        <!-- Contenido Principal -->
        <main class="flex-1 overflow-y-auto p-4 space-y-4">

            <!-- SECCIÓN: HOME -->
            <section id="home-section" class="space-y-4">
                <!-- Balance Principal -->
                <div class="bg-gradient-to-br from-blue-600 to-blue-800 dark:from-blue-900 dark:to-slate-900 rounded-2xl p-6 text-white shadow-lg">
                    <p class="text-blue-100 dark:text-blue-200 text-sm mb-1">Balance Total</p>
                    <h1 class="text-3xl font-bold mb-4">$24,562.80</h1>
                    <div class="flex gap-4 text-sm">
                        <div class="bg-white/20 dark:bg-white/10 rounded-lg px-3 py-1 backdrop-blur-sm">
                            <span class="block text-xs text-blue-100 dark:text-blue-200">Ingresos</span>
                            <span class="font-semibold">+$3,200</span>
                        </div>
                        <div class="bg-white/20 dark:bg-white/10 rounded-lg px-3 py-1 backdrop-blur-sm">
                            <span class="block text-xs text-blue-100 dark:text-blue-200">Gastos</span>
                            <span class="font-semibold">-$1,450</span>
                        </div>
                    </div>
                </div>

                <!-- Acciones Rápidas -->
                <div class="grid grid-cols-4 gap-3">
                    <button onclick="showSection('transfer')" class="flex flex-col items-center gap-2 p-3 rounded-xl bg-gray-50 dark:bg-dark-surface hover:bg-gray-100 dark:hover:bg-dark-surface2 transition-colors">
                        <div class="w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-brand-primary">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                        </div>
                        <span class="text-xs font-medium dark:text-darktext-primary">Enviar</span>
                    </button>
                    <button class="flex flex-col items-center gap-2 p-3 rounded-xl bg-gray-50 dark:bg-dark-surface hover:bg-gray-100 dark:hover:bg-dark-surface2 transition-colors">
                        <div class="w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-brand-success">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                        </div>
                        <span class="text-xs font-medium dark:text-darktext-primary">Recargar</span>
                    </button>
                    <button class="flex flex-col items-center gap-2 p-3 rounded-xl bg-gray-50 dark:bg-dark-surface hover:bg-gray-100 dark:hover:bg-dark-surface2 transition-colors">
                        <div class="w-12 h-12 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                        </div>
                        <span class="text-xs font-medium dark:text-darktext-primary">Estadísticas</span>
                    </button>
                    <button class="flex flex-col items-center gap-2 p-3 rounded-xl bg-gray-50 dark:bg-dark-surface hover:bg-gray-100 dark:hover:bg-dark-surface2 transition-colors">
                        <div class="w-12 h-12 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-brand-warning">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>
                        </div>
                        <span class="text-xs font-medium dark:text-darktext-primary">Más</span>
                    </button>
                </div>

                <!-- Transaciones Recientes -->
                <div class="bg-white dark:bg-dark-surface rounded-2xl p-4 shadow-sm dark:shadow-none border dark:border-dark-border">
                    <h3 class="font-semibold mb-4 dark:text-darktext-primary">Transacciones Recientes</h3>
                    <div class="space-y-3">
                        <div class="flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-dark-surface2 transition-colors cursor-pointer">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center text-red-600 dark:text-brand-error">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg>
                                </div>
                                <div>
                                    <p class="font-medium text-sm dark:text-darktext-primary">Supermercado</p>
                                    <p class="text-xs text-gray-500 dark:text-darktext-secondary">Hoy, 2:30 PM</p>
                                </div>
                            </div>
                            <span class="font-semibold text-red-600 dark:text-brand-error">-$85.20</span>
                        </div>
                        
                        <div class="flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-dark-surface2 transition-colors cursor-pointer">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-brand-success">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                                </div>
                                <div>
                                    <p class="font-medium text-sm dark:text-darktext-primary">Depósito</p>
                                    <p class="text-xs text-gray-500 dark:text-darktext-secondary">Ayer, 9:00 AM</p>
                                </div>
                            </div>
                            <span class="font-semibold text-green-600 dark:text-brand-success">+$2,500.00</span>
                        </div>

                        <div class="flex items-center justify-between p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-dark-surface2 transition-colors cursor-pointer">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-brand-primary">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
                                </div>
                                <div>
                                    <p class="font-medium text-sm dark:text-darktext-primary">Netflix</p>
                                    <p class="text-xs text-gray-500 dark:text-darktext-secondary">Ayer, 6:15 PM</p>
                                </div>
                            </div>
                            <span class="font-semibold text-red-600 dark:text-brand-error">-$15.99</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECCIÓN: TRANSFER (ARREGLADA) -->
            <section id="transfer-section" class="hidden space-y-4">
                <div class="bg-white dark:bg-dark-surface rounded-2xl p-6 shadow-sm dark:shadow-none border dark:border-dark-border">
                    <h2 class="text-xl font-bold mb-4 dark:text-darktext-primary">Transferir Dinero</h2>
                    
                    <!-- Selector de Cuenta Origen -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-darktext-secondary mb-2">Desde</label>
                        <div id="source-accounts" class="space-y-2">
                            <!-- Las cuentas se cargarán aquí dinámicamente -->
                            <div class="animate-pulse flex space-x-4">
                                <div class="flex-1 space-y-2 py-1">
                                    <div class="h-4 bg-gray-200 dark:bg-dark-surface2 rounded w-3/4"></div>
                                    <div class="h-3 bg-gray-200 dark:bg-dark-surface2 rounded w-1/2"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Input de Monto -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-darktext-secondary mb-2">Monto</label>
                        <div class="relative">
                            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 dark:text-darktext-secondary text-lg">$</span>
                            <input type="number" id="transfer-amount" placeholder="0.00" 
                                class="w-full pl-10 pr-4 py-3 rounded-xl border dark:border-dark-border bg-white dark:bg-dark-surface2 text-gray-900 dark:text-darktext-primary placeholder-gray-400 dark:placeholder-darktext-disabled focus:ring-2 focus:ring-blue-500 dark:focus:ring-brand-primary focus:border-transparent text-lg font-semibold">
                        </div>
                    </div>

                    <!-- Selector de Destinatario -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-darktext-secondary mb-2">Para</label>
                        <div class="grid grid-cols-3 gap-3 mb-3">
                            <button onclick="selectRecipient('contact')" class="recipient-type p-3 rounded-xl border-2 border-blue-600 dark:border-brand-primary bg-blue-50 dark:bg-blue-900/20 text-center" data-type="contact">
                                <svg class="w-6 h-6 mx-auto mb-1 text-blue-600 dark:text-brand-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                                <span class="text-xs font-medium dark:text-darktext-primary">Contacto</span>
                            </button>
                            <button onclick="selectRecipient('account')" class="recipient-type p-3 rounded-xl border-2 border-gray-200 dark:border-dark-border text-center hover:border-gray-300 dark:hover:border-dark-surface3" data-type="account">
                                <svg class="w-6 h-6 mx-auto mb-1 text-gray-400 dark:text-darktext-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
                                <span class="text-xs font-medium dark:text-darktext-secondary">Cuenta</span>
                            </button>
                            <button onclick="selectRecipient('qr')" class="recipient-type p-3 rounded-xl border-2 border-gray-200 dark:border-dark-border text-center hover:border-gray-300 dark:hover:border-dark-surface3" data-type="qr">
                                <svg class="w-6 h-6 mx-auto mb-1 text-gray-400 dark:text-darktext-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path></svg>
                                <span class="text-xs font-medium dark:text-darktext-secondary">QR</span>
                            </button>
                        </div>
                        
                        <!-- Input de destinatario -->
                        <input type="text" placeholder="Buscar contacto..." 
                            class="w-full px-4 py-3 rounded-xl border dark:border-dark-border bg-white dark:bg-dark-surface2 text-gray-900 dark:text-darktext-primary placeholder-gray-400 dark:placeholder-darktext-disabled focus:ring-2 focus:ring-blue-500 dark:focus:ring-brand-primary focus:border-transparent">
                    </div>

                    <!-- Botón de Transferir -->
                    <button onclick="processTransfer()" class="w-full bg-blue-600 dark:bg-brand-primary hover:bg-blue-700 dark:hover:bg-blue-500 text-white font-semibold py-3 rounded-xl transition-colors shadow-lg dark:shadow-none">
                        Transferir Ahora
                    </button>
                </div>

                <!-- Contactos Frecuentes -->
                <div class="bg-white dark:bg-dark-surface rounded-2xl p-4 shadow-sm dark:shadow-none border dark:border-dark-border">
                    <h3 class="font-semibold mb-3 dark:text-darktext-primary">Frecuentes</h3>
                    <div class="flex gap-4 overflow-x-auto pb-2">
                        <button class="flex flex-col items-center min-w-[64px]">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-br from-purple-400 to-pink-400 flex items-center justify-center text-white font-bold mb-1">MA</div>
                            <span class="text-xs text-gray-600 dark:text-darktext-secondary">María</span>
                        </button>
                        <button class="flex flex-col items-center min-w-[64px]">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-cyan-400 flex items-center justify-center text-white font-bold mb-1">JC</div>
                            <span class="text-xs text-gray-600 dark:text-darktext-secondary">Juan</span>
                        </button>
                        <button class="flex flex-col items-center min-w-[64px]">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-br from-green-400 to-emerald-400 flex items-center justify-center text-white font-bold mb-1">AL</div>
                            <span class="text-xs text-gray-600 dark:text-darktext-secondary">Ana</span>
                        </button>
                        <button class="flex flex-col items-center min-w-[64px]">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-br from-orange-400 to-red-400 flex items-center justify-center text-white font-bold mb-1">PC</div>
                            <span class="text-xs text-gray-600 dark:text-darktext-secondary">Pedro</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- SECCIÓN: CUENTAS -->
            <section id="accounts-section" class="hidden space-y-4">
                <div class="bg-white dark:bg-dark-surface rounded-2xl p-6 shadow-sm dark:shadow-none border dark:border-dark-border">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold dark:text-darktext-primary">Mis Cuentas</h2>
                        <button onclick="addAccount()" class="text-blue-600 dark:text-brand-primary text-sm font-medium hover:underline">
                            + Agregar
                        </button>
                    </div>
                    
                    <div id="accounts-list" class="space-y-3">
                        <!-- Cuentas cargadas dinámicamente -->
                    </div>
                </div>
            </section>

            <!-- SECCIÓN: APARIENCIA (FIXED) -->
            <section id="appearance-section" class="hidden space-y-4">
                <div class="bg-white dark:bg-dark-surface rounded-2xl p-6 shadow-sm dark:shadow-none border dark:border-dark-border">
                    <h2 class="text-xl font-bold mb-6 dark:text-darktext-primary">Apariencia</h2>
                    
                    <!-- FIX: Toggle de Dark Mode con colores correctos -->
                    <div class="flex items-center justify-between p-4 rounded-xl bg-gray-50 dark:bg-dark-surface2 border dark:border-dark-border mb-4">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                                </svg>
                            </div>
                            <div>
                                <p class="font-medium dark:text-darktext-primary">Modo Oscuro</p>
                                <p class="text-xs text-gray-500 dark:text-darktext-secondary">Cambiar entre tema claro y oscuro</p>
                            </div>
                        </div>
                        
                        <!-- FIX: Toggle switch con colores visibles en ambos modos -->
                        <button onclick="toggleTheme()" id="theme-toggle-btn" class="relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-brand-primary focus:ring-offset-2 dark:focus:ring-offset-dark-bg bg-gray-200 dark:bg-brand-primary">
                            <span class="sr-only">Activar modo oscuro</span>
                            <span id="theme-toggle-knob" class="inline-block h-5 w-5 transform rounded-full bg-white shadow transition-transform translate-x-1 dark:translate-x-6"></span>
                        </button>
                    </div>

                    <!-- Selector de Color de Acento -->
                    <div class="space-y-3">
                        <label class="block text-sm font-medium text-gray-700 dark:text-darktext-secondary">Color de Acento</label>
                        <div class="flex gap-3">
                            <button onclick="setAccentColor('blue')" class="w-10 h-10 rounded-full bg-blue-600 ring-2 ring-offset-2 ring-blue-600 dark:ring-brand-primary dark:ring-offset-dark-bg transition-transform hover:scale-110"></button>
                            <button onclick="setAccentColor('purple')" class="w-10 h-10 rounded-full bg-purple-600 ring-2 ring-offset-2 ring-transparent hover:ring-purple-600 dark:hover:ring-purple-400 dark:ring-offset-dark-bg transition-transform hover:scale-110"></button>
                            <button onclick="setAccentColor('green')" class="w-10 h-10 rounded-full bg-green-600 ring-2 ring-offset-2 ring-transparent hover:ring-green-600 dark:hover:ring-green-400 dark:ring-offset-dark-bg transition-transform hover:scale-110"></button>
                            <button onclick="setAccentColor('orange')" class="w-10 h-10 rounded-full bg-orange-500 ring-2 ring-offset-2 ring-transparent hover:ring-orange-500 dark:hover:ring-orange-400 dark:ring-offset-dark-bg transition-transform hover:scale-110"></button>
                        </div>
                    </div>

                    <!-- Tamaño de Fuente -->
                    <div class="mt-6 space-y-3">
                        <label class="block text-sm font-medium text-gray-700 dark:text-darktext-secondary">Tamaño de Texto</label>
                        <div class="flex items-center gap-4 bg-gray-50 dark:bg-dark-surface2 p-3 rounded-xl border dark:border-dark-border">
                            <span class="text-sm text-gray-500 dark:text-darktext-secondary">A</span>
                            <input type="range" min="1" max="3" value="2" class="flex-1 h-2 bg-gray-200 dark:bg-dark-surface3 rounded-lg appearance-none cursor-pointer accent-blue-600 dark:accent-brand-primary">
                            <span class="text-lg text-gray-900 dark:text-darktext-primary font-bold">A</span>
                        </div>
                    </div>
                </div>

                <!-- Preview del Tema -->
                <div class="bg-white dark:bg-dark-surface rounded-2xl p-6 shadow-sm dark:shadow-none border dark:border-dark-border">
                    <h3 class="font-semibold mb-4 dark:text-darktext-primary">Vista Previa</h3>
                    <div class="space-y-3">
                        <div class="p-3 rounded-lg bg-gray-50 dark:bg-dark-surface2 border dark:border-dark-border">
                            <p class="text-sm font-medium dark:text-darktext-primary">Texto Principal</p>
                            <p class="text-xs text-gray-500 dark:text-darktext-secondary">Texto secundario</p>
                        </div>
                        <button class="w-full py-2 bg-blue-600 dark:bg-brand-primary text-white rounded-lg text-sm font-medium">
                            Botón Primario
                        </button>
                        <button class="w-full py-2 bg-gray-200 dark:bg-dark-surface2 text-gray-700 dark:text-darktext-primary rounded-lg text-sm font-medium border dark:border-dark-border">
                            Botón Secundario
                        </button>
                    </div>
                </div>
            </section>

        </main>

        <!-- Toast Notification -->
        <div id="toast" class="fixed bottom-4 left-1/2 -translate-x-1/2 bg-gray-900 dark:bg-dark-surface2 text-white px-6 py-3 rounded-full shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 z-50 border dark:border-dark-border">
            <span id="toast-message">Mensaje</span>
        </div>
    </div>

    <script>
        // Datos de ejemplo
        const accountsData = [
            { id: 1, name: 'Cuenta Principal', number: '**** 4521', balance: 24562.80, type: 'checking', color: 'blue' },
            { id: 2, name: 'Ahorros', number: '**** 8892', balance: 12500.00, type: 'savings', color: 'green' },
            { id: 3, name: 'Tarjeta de Crédito', number: '**** 3341', balance: -1250.50, type: 'credit', color: 'purple' }
        ];

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            // Cargar tema guardado
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            }
            
            // Cargar datos
            loadAccounts();
            
            // FIX: Cargar cuentas en transferencia inmediatamente
            loadTransferAccounts();
        });

        // Navegación entre secciones
        function showSection(sectionName) {
            // Ocultar todas las secciones
            document.querySelectorAll('main > section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Mostrar sección seleccionada
            document.getElementById(sectionName + '-section').classList.remove('hidden');
            
            // Actualizar tabs
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if(btn.dataset.section === sectionName) {
                    btn.classList.remove('text-gray-500', 'dark:text-darktext-secondary');
                    btn.classList.add('text-blue-600', 'dark:text-brand-primary', 'border-b-2', 'border-blue-600', 'dark:border-brand-primary');
                } else {
                    btn.classList.add('text-gray-500', 'dark:text-darktext-secondary');
                    btn.classList.remove('text-blue-600', 'dark:text-brand-primary', 'border-b-2', 'border-blue-600', 'dark:border-brand-primary');
                }
            });

            // Si es transferencia, recargar cuentas
            if(sectionName === 'transfer') {
                loadTransferAccounts();
            }
        }

        // FIX: Cargar cuentas en sección de transferencia
        function loadTransferAccounts() {
            const container = document.getElementById('source-accounts');
            
            // Simular carga rápida (eliminar el "Cargando...")
            setTimeout(() => {
                if(accountsData.length === 0) {
                    container.innerHTML = '<p class="text-sm text-gray-500 dark:text-darktext-secondary">No hay cuentas disponibles</p>';
                    return;
                }

                container.innerHTML = accountsData.map(account => `
                    <div class="flex items-center justify-between p-3 rounded-xl border-2 border-blue-600 dark:border-brand-primary bg-blue-50 dark:bg-blue-900/20 cursor-pointer" onclick="selectSourceAccount(${account.id})">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-${account.color}-100 dark:bg-${account.color}-900/30 flex items-center justify-center text-${account.color}-600 dark:text-${account.color}-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
                            </div>
                            <div>
                                <p class="font-medium text-sm dark:text-darktext-primary">${account.name}</p>
                                <p class="text-xs text-gray-500 dark:text-darktext-secondary">${account.number}</p>
                            </div>
                        </div>
                        <span class="font-semibold dark:text-darktext-primary">$${account.balance.toLocaleString('en-US', {minimumFractionDigits: 2})}</span>
                    </div>
                `).join('');
            }, 300); // Pequeño delay para simular carga pero sin quedar colgado
        }

        function loadAccounts() {
            const container = document.getElementById('accounts-list');
            container.innerHTML = accountsData.map(account => `
                <div class="flex items-center justify-between p-4 rounded-xl border dark:border-dark-border hover:bg-gray-50 dark:hover:bg-dark-surface2 transition-colors cursor-pointer">
                    <div class="flex items-center gap-3">
                        <div class="w-12 h-12 rounded-full bg-${account.color}-100 dark:bg-${account.color}-900/30 flex items-center justify-center text-${account.color}-600 dark:text-${account.color}-400">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path></svg>
                        </div>
                        <div>
                            <p class="font-medium dark:text-darktext-primary">${account.name}</p>
                            <p class="text-xs text-gray-500 dark:text-darktext-secondary">${account.number}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-semibold ${account.balance < 0 ? 'text-red-600 dark:text-brand-error' : 'dark:text-darktext-primary'}">
                            $${Math.abs(account.balance).toLocaleString('en-US', {minimumFractionDigits: 2})}
                        </p>
                        <p class="text-xs text-gray-500 dark:text-darktext-secondary">${account.type === 'credit' ? 'Crédito' : 'Débito'}</p>
                    </div>
                </div>
            `).join('');
        }

        // FIX: Toggle de tema mejorado
        function toggleTheme() {
            const html = document.documentElement;
            const isDark = html.classList.toggle('dark');
            
            // Guardar preferencia
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            
            // Actualizar knob del toggle en Apariencia
            const knob = document.getElementById('theme-toggle-knob');
            const btn = document.getElementById('theme-toggle-btn');
            
            if(isDark) {
                knob.classList.add('translate-x-6');
                knob.classList.remove('translate-x-1');
                btn.classList.remove('bg-gray-200');
                btn.classList.add('bg-brand-primary');
            } else {
                knob.classList.remove('translate-x-6');
                knob.classList.add('translate-x-1');
                btn.classList.add('bg-gray-200');
                btn.classList.remove('bg-brand-primary');
            }
            
            showToast(isDark ? 'Modo oscuro activado' : 'Modo claro activado');
        }

        function selectRecipient(type) {
            document.querySelectorAll('.recipient-type').forEach(btn => {
                if(btn.dataset.type === type) {
                    btn.classList.add('border-blue-600', 'dark:border-brand-primary', 'bg-blue-50', 'dark:bg-blue-900/20');
                    btn.classList.remove('border-gray-200', 'dark:border-dark-border');
                    btn.querySelector('svg').classList.add('text-blue-600', 'dark:text-brand-primary');
                    btn.querySelector('svg').classList.remove('text-gray-400', 'dark:text-darktext-secondary');
                    btn.querySelector('span').classList.add('dark:text-darktext-primary');
                    btn.querySelector('span').classList.remove('dark:text-darktext-secondary');
                } else {
                    btn.classList.remove('border-blue-600', 'dark:border-brand-primary', 'bg-blue-50', 'dark:bg-blue-900/20');
                    btn.classList.add('border-gray-200', 'dark:border-dark-border');
                    btn.querySelector('svg').classList.remove('text-blue-600', 'dark:text-brand-primary');
                    btn.querySelector('svg').classList.add('text-gray-400', 'dark:text-darktext-secondary');
                    btn.querySelector('span').classList.remove('dark:text-darktext-primary');
                    btn.querySelector('span').classList.add('dark:text-darktext-secondary');
                }
            });
        }

        function processTransfer() {
            const amount = document.getElementById('transfer-amount').value;
            if(!amount || amount <= 0) {
                showToast('Por favor ingresa un monto válido');
                return;
            }
            showToast('Transferencia exitosa!');
            document.getElementById('transfer-amount').value = '';
        }

        function addAccount() {
            showToast('Función próximamente disponible');
        }

        function setAccentColor(color) {
            showToast(`Color ${color} seleccionado`);
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-message').textContent = message;
            toast.classList.remove('translate-y-20', 'opacity-0');
            
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        function selectSourceAccount(id) {
            // Visual feedback para selección de cuenta
            showToast('Cuenta seleccionada');
        }
    </script>
</body>
</html>